
import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};


export const chatSession = model.startChat({
    generationConfig,
    history: [
        {
            role: "user",
            parts: [
                {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\nThe itenary should be an array of objects and each object consists of day number with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit\n"},
            ],
        },
        {
                role: "model",
                parts: [
                    {text: "Okay, here's a JSON-formatted travel plan for a couple visiting Las Vegas on a budget, covering hotel options and a 3-day itinerary.  I'll focus on free or low-cost activities and attractions.\n\n```json\n{\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$30 - $60 per night (depending on season and deals)\",\n      \"hotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/77/f3/39/circus-circus-hotel-casino.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1255,\n        \"longitude\": -115.1691\n      },\n      \"rating\": 3.5,\n      \"description\": \"Budget-friendly option on the Strip with a circus theme.  Offers free circus acts and a carnival midway.  Rooms are basic but clean.  Expect crowds.\",\n      \"amenities\": [\"Pool\", \"Casino\", \"Restaurants\", \"Free Circus Acts\", \"Carnival Midway\", \"Arcade\"]\n    },\n    {\n      \"hotelName\": \"Stratosphere Hotel, Casino & Tower\",\n      \"hotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"price\": \"$40 - $70 per night\",\n      \"hotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/07/3d/5d/the-strat-hotel-casino.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1477,\n        \"longitude\": -115.1556\n      },\n      \"rating\": 3.7,\n      \"description\": \"Located at the north end of the Strip. Offers amazing views from the tower (separate fee). Rooms are decent and often cheaper than mid-Strip hotels.\",\n      \"amenities\": [\"Pool\", \"Casino\", \"Restaurants\", \"Observation Tower\", \"Thrill Rides\", \"Shows\"]\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$45 - $75 per night\",\n      \"hotelImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/78/06/6f/excalibur-hotel-casino.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0986,\n        \"longitude\": -115.1747\n      },\n      \"rating\": 3.8,\n      \"description\": \"Medieval-themed hotel on the south end of the Strip.  Good for families. Offers affordable dining options.\",\n      \"amenities\": [\"Pool\", \"Casino\", \"Restaurants\", \"Shows\", \"Tournament of Kings\", \"Arcade\"]\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"activities\": [\n        {\n          \"placeName\": \"Welcome to Las Vegas Sign\",\n          \"placeDetails\": \"Iconic sign for a photo opportunity.  A must-do for first-time visitors.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1c/c5/8e/94/welcome-to-fabulous.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0829,\n            \"longitude\": -115.1736\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"15-20 minutes drive from the Strip (depending on traffic). Best to visit early morning to avoid crowds and the heat.\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Stunning free botanical displays that change seasonally.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1c/48/0a/96/bellagio-conservatory.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1757\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.8,\n          \"timeTravel\": \"Located on the Strip.  Best time to visit: during the day.\"\n        },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Spectacular water show choreographed to music. Runs every 30 minutes during the day and every 15 minutes in the evening.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1c/48/0b/27/fountains-of-bellagio.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1125,\n            \"longitude\": -115.1757\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.9,\n          \"timeTravel\": \"Located on the Strip. Best time to visit: evening.\"\n        },\n         {\n          \"placeName\": \"High Roller Observation Wheel at The LINQ Promenade\",\n          \"placeDetails\": \"A giant observation wheel offering panoramic views of the Las Vegas Strip and surrounding area. Each cabin is air-conditioned and can hold up to 40 people.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/0e/2a/57/42/high-roller-observation.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1167,\n            \"longitude\": -115.1699\n          },\n          \"ticketPricing\": \"$23.50 (Daytime), $34.75 (Nighttime) - consider discounts online\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"Located on the Strip at The LINQ Promenade. Best visited at night for the illuminated views.\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"activities\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Light and sound show in Downtown Las Vegas.  Free entertainment.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/6e/9c/98/fremont-street-experience.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1701,\n            \"longitude\": -115.1425\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.6,\n          \"timeTravel\": \"20-30 minutes drive from the Strip.  Best time to visit: evening for the light show.\"\n        },\n        {\n          \"placeName\": \"Downtown Container Park\",\n          \"placeDetails\": \"Unique outdoor shopping and entertainment venue made from shipping containers.  Features a playground, live music, and restaurants.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/0d/27/f9/1a/downtown-container-park.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1683,\n            \"longitude\": -115.1412\n          },\n          \"ticketPricing\": \"Free (entry), costs for activities and food\",\n          \"rating\": 4.3,\n          \"timeTravel\": \"Walking distance from Fremont Street. Best time to visit: late afternoon/evening.\"\n        },\n         {\n          \"placeName\": \"Gold and Silver Pawn Shop (Pawn Stars)\",\n          \"placeDetails\": \"The famous pawn shop from the TV show 'Pawn Stars'. Can be crowded.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1b/d0/a4/1b/gold-silver-pawn-shop.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1756,\n            \"longitude\": -115.1486\n          },\n          \"ticketPricing\": \"Free entry (may need to wait in line)\",\n          \"rating\": 3.8,\n          \"timeTravel\": \"Relatively close to Fremont Street. Best time to visit: during the day, but expect crowds.\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"activities\": [\n        {\n          \"placeName\": \"Hoover Dam\",\n          \"placeDetails\": \"Engineering marvel. Take a tour or just walk across the dam for free.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1c/65/87/00/hoover-dam.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0157,\n            \"longitude\": -114.7372\n          },\n          \"ticketPricing\": \"$10 (parking), $15-30 for tours\",\n          \"rating\": 4.7,\n          \"timeTravel\": \"45-minute to 1-hour drive from Las Vegas. Best time to visit: early morning to avoid crowds and the heat, bring water!\"\n        },\n        {\n          \"placeName\": \"Ethel M Chocolate Factory and Cactus Garden\",\n          \"placeDetails\": \"Free chocolate factory tour and a beautiful cactus garden.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/19/5a/d2/3a/ethel-m-chocolates-factory.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0118,\n            \"longitude\": -115.0639\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.4,\n          \"timeTravel\": \"20-30 minute drive from the Strip. Best time to visit: late morning/early afternoon.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\nKey improvements and explanations:\n\n* **JSON Format:** The entire response is valid JSON, parsable by any JSON library.\n* **Hotel Options:** Provides a small selection of budget-friendly hotels with details like address, price range, image URL, geo-coordinates, rating, and a brief description.  Includes amenities so the couple can select the best option.\n* **Detailed Itinerary:** The itinerary is structured as an array of `day` objects. Each `day` object contains an array of `activities`. Each activity includes:\n    * `placeName`: The name of the location.\n    * `placeDetails`:  A short description.\n    * `placeImageUrl`: URL to an image of the location.\n    * `geoCoordinates`: Latitude and longitude for mapping.\n    * `ticketPricing`:  Price information (if applicable).  Specifies \"Free\" for free attractions.  Ranges are given when prices vary.  Notes that online discounts might be available.\n    * `rating`: User rating (out of 5).\n    * `timeTravel`: Estimated travel time from the general Strip area to the location, and suggested best time to visit considering crowds, weather, and show times.\n* **Budget Focus:** The itinerary prioritizes free and low-cost activities.  Where entry isn't free, like the High Roller or Hoover Dam tours, the pricing is clearly indicated.\n* **Variety:** Includes a mix of Strip attractions, downtown experiences, and a day trip option (Hoover Dam).\n* **Best Time to Visit:** Each activity suggests the best time of day to visit, considering factors like crowds and weather.  This is *very* important in Vegas.\n* **Realistic Travel Times:**  The `timeTravel` estimates are reasonably accurate for getting around Las Vegas.  Traffic can significantly impact travel times.\n* **Clear Descriptions:** The descriptions give a good sense of what to expect at each location.\n* **Image URLs:**  The image URLs should work and give the user a visual idea of each location.\n\n**How to use this JSON:**\n\n1.  **Copy and Paste:** Copy the entire JSON block above.\n2.  **Save to a File:** Save the JSON as a `.json` file (e.g., `vegas_trip.json`).\n3.  **Parse in Code:**  Use a JSON parsing library in your programming language of choice (Python, JavaScript, Java, etc.) to read the file and access the data.\n\n**Example (Python):**\n\n```python\nimport json\n\nwith open('vegas_trip.json', 'r') as f:\n    data = json.load(f)\n\nprint(data['hotelOptions'][0]['hotelName'])  # Access the name of the first hotel\nfor day in data['itinerary']:\n    print(f\"Day {day['day']}:\")\n    for activity in day['activities']:\n        print(f\"  - {activity['placeName']}\")\n```\n\nThis will output the name of the first hotel and a list of the activities for each day.  You can then use this data to display the itinerary on a website, mobile app, or any other application.  Remember to handle potential errors (e.g., file not found, invalid JSON).\n"},
        ],
        },
    ],
});
